<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>snake</title>
    </head>
<body>
   <canvas id="canvas" width="400" height="400"></canvas>
    <script src="jquery/dist/jquery.js"></script>
    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var width = canvas.width;
        var height = canvas.height;
        var score = 0;

        //Создание сетки
        var blockSize = 10;
        var blockInWidth = width / 10;
        var blockInHeight = height / 10;
        
        //Функция рисования рамки
        var drawBorder = function() {
            ctx.fillStyle = "#514f79";
            ctx.fillRect(0, 0, width, blockSize);
            ctx.fillRect(0, height - blockSize, width, blockSize);
            ctx.fillRect(0, blockSize, blockSize, height - blockSize*2);
            ctx.fillRect(width - blockSize, blockSize, blockSize, height - blockSize*2);
        };
        drawBorder();

        //Функция отображения счета
        var drawScore = function() {
            ctx.fillStyle = "black";
            ctx.font = "20px Courier";
            ctx.textBaseline = "top";
            ctx.textAlign = "left";
            ctx.fillText("Счёт: " + score, blockSize, blockSize);
        };
        drawScore();

        //Функция для информирования о завершении игры
        var gameOver = function() {
            clearInterval(intervalId);
            ctx.font = "60px Courier";
            ctx.style = "black";
            ctx.textBaseline = "middle";
            ctx.textAlign = "center";
            ctx.fillText("Конец игры", width / 2, height / 2);
        };

        //Конструктор Block 
        var Block = function(col, row) {
            this.col = col;
            this.row = row;
        };

        //Метод объектов конструктора Block для рисования квадрата в заданной ячейке
        Block.prototype.drawSquare = function(color_1, color_2) {
            var x = this.col * blockSize;
            var y = this.row * blockSize;
            ctx.fillStyle = color_1;
            ctx.fillRect(x, y, blockSize, blockSize);
            ctx.lineWidth = 2;
            ctx.strokeStyle = color_2;
            ctx.strokeRect(x, y, blockSize, blockSize);
        };

        //Функция рисования окружности
        var circle = function(x, y, r, fillCircle) {
            ctx.beginPath();
            ctx.arc(x, y, r, 0, Math.PI * 2, false);
            if (fillCircle) {
                ctx.fill();
            } else {
                ctx.stroke();
            }
        };

        //Метод объектов конструктора Block для рисования окружности в заданной ячейке
        Block.prototype.drawCircle = function(color) {
            var centerX = this.col * blockSize + blockSize / 2;
            var centerY = this.row * blockSize + blockSize / 2;
            ctx.fillStyle = color;
            circle(centerX, centerY, blockSize / 2, true);
        };

        //Метод проверки нахождения объектов-ячеек в одной ячейке
        Block.prototype.equal = function(otherBlock) {
            return this.col === otherBlock.col && this.row === otherBlock.row;
        };

        //Конструктор Snake для создания объекта змейки
        var Snake = function() {
            this.segments = [
                new Block(7, 10),
                new Block(6, 10),
                new Block(5, 10)
            ];
            this.direction = "right";
            this.nextDirection = "right";
        };

        //Метод объектов конструктора Snake для рисования змейки
        Snake.prototype.draw = function() {
            for (var i = 0; i < this.segments.length; i+=1) {
                this.segments[i].drawSquare("#a56800", "#dbcf00");
            }
        };
        snake = new Snake;
        
        
        //Метод объектов конструктора Snake для передвижения змейки
        Snake.prototype.move = function() {
            var head = this.segments[0];
            var newHead;
          
            this.direction = "right";
         
            if (this.direction === "right") {
                newHead = new Block(head.col + 1, head.row)
            } else if (this.direction === "left") {
                newHead = new Block(head.col - 1, head.row)
            } else if (this.direction === "up") {
                newHead = new Block(head.col, head.row - 1)
            } else if (this.direction === "down") {
                newHead = new Block(head.col, head.row + 1)
            }

            /*if (this.checkCollision(newHead)) {
                gameOver();
                return;
            }*/

            this.segments.unshift(newHead);
            this.segments.pop();
            
            

            /*if (newHead.equal(apple.position)) {
                score+=1;
                apple.move();
            } else {
                this.segments.pop();
            }*/
        };

        setInterval(function() {
                drawBorder();
                drawScore();
                snake.draw();
                snake.move();
            }, 100)
        
        
        
        

                

        


        
    </script>
    
</body>
</html>